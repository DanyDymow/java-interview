## Service mesh

Service mesh — это паттерн, позволяющий более гибко управлять трафиком в Kubernetes. Service mesh состоит из control plane, который собирает информацию о кластере k8s, запущенных в нём приложениях, а также дополнительных объектах (custom resources), которые могут быть описаны для дополнительной конфигурации, и так называемых sidecar-контейнерах, которые, как правило, инжектятся в PODы автоматически при помощи mutation webhook. Sidecar-контейнеры представляют собой reverse-proxy, перехватывающие входящий и исходящий трафик приложений в контейнерах и управляющие им в зависимости от полученной из control plane конфигурации.


Основные задачи, в которых используется service mesh, это:

гарантия доставки трафика до приложений (service mesh реализует retry / timeouts / circuit breaker и другие подобные механизмы);

увеличение безопасности при помощи шифрования трафика, верификация трафика на основе сертификатов, реализация дополнительных правил и разрешений на передачу трафика;

tracing запросов, составление схемы и визуализация трафика;

реализация переключения трафика при canary, a/b и blue/green стратегий деплоя.